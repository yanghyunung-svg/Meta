<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.meta.mapper.TbStdTermBscMapper">

    <select id="getListData" parameterType="com.meta.dto.TbStdTermBscDto" resultType="com.meta.dto.TbStdTermBscDto">
        SELECT  TRM_NM , ENG_NM , TRM_EXPLN , DMN_NM, STTS_CD
        , CRT_ID, UPD_ID
        , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
        , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
        FROM tb_std_term_bsc
        WHERE 1=1
            <if test="trmNm != null and trmNm != ''">
                AND TRM_NM LIKE CONCAT('%', #{trmNm}, '%')
            </if>
            <if test="engNm != null and engNm != ''">
                AND ENG_NM LIKE CONCAT('%', #{engNm}, '%')
            </if>
            <if test="sttsCd != null and sttsCd != ''">
                AND STTS_CD = #{sttsCd}
            </if>
        ORDER BY TRM_NM, ENG_NM
    </select>

    <select id="getData" parameterType="com.meta.dto.TbStdTermBscDto" resultType="com.meta.dto.TbStdTermBscDto">
        SELECT  TRM_NM , ENG_NM , TRM_EXPLN , DMN_NM, STTS_CD , CRT_ID, UPD_ID
        , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
        , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
        FROM tb_std_term_bsc
        WHERE TRM_NM = #{trmNm}
    </select>

    <insert id="insertData" parameterType="com.meta.dto.TbStdTermBscDto">
        INSERT INTO tb_std_term_bsc
        (
            TRM_NM,
            ENG_NM,
            TRM_EXPLN,
            DMN_NM,
            STTS_CD,
            CRT_ID,
            UPD_ID
        )
        VALUES
        (
            #{trmNm},
            #{engNm},
            #{trmExpln},
            #{dmnNm},
            #{sttsCd},
            #{crtId},
            #{updId}
        )
    </insert>

    <!--tb_std_term_bsc UPDATE-->
    <update id="updateData" parameterType="com.meta.dto.TbStdTermBscDto">
        UPDATE tb_std_term_bsc
        SET TRM_NM = #{trmNm}
          , ENG_NM = #{engNm}
          , TRM_EXPLN = #{trmExpln}
          , DMN_NM = #{dmnNm}
          , STTS_CD = #{sttsCd}
          , UPD_ID = #{updId}
        WHERE TRM_NM = #{trmNm}
    </update>

    <update id="deleteData" parameterType="com.meta.dto.TbStdTermBscDto">
        DELETE FROM tb_std_term_bsc
        WHERE TRM_NM = #{trmNm}
    </update>

    <select id="getLockData" parameterType="com.meta.dto.TbStdTermBscDto" resultType="com.meta.dto.TbStdTermBscDto">
        SELECT TRM_NM , ENG_NM , TRM_EXPLN , DMN_NM, STTS_CD , CRT_ID, UPD_ID
        , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
        , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
        FROM tb_std_term_bsc
        WHERE TRM_NM = #{trmNm}
          FOR UPDATE
    </select>

    <select id="countCode" parameterType="com.meta.dto.TbStdTermBscDto" resultType="int">
        SELECT COUNT(*)
        FROM tb_std_term_bsc
        WHERE TRM_NM = #{trmNm}
    </select>

</mapper>
