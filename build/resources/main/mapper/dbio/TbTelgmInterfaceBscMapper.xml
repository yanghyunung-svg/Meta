<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.meta.mapper.dbio.TbTelgmInterfaceBscMapper">

   <!--tb_telgm_interface_bsc SELECT-->
   <select id="getData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto" resultType="com.meta.dto.TbTelgmInterfaceBscDto">
      SELECT IF_ID
           , INST_CD
           , TASK_SE_CD
           , HNDL_ESTBL_SE_CD
           , TELGM_TYPE_CD
           , TELGM_KND_CD
           , DLNG_SE_CD
           , TELGM_NM
           , TELGM_EXPLN
           , STTS_CD
       , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
       , CRT_ID
       , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
       , UPD_ID
        FROM tb_telgm_interface_bsc
       WHERE IF_ID = #{ifId}
  </select>

   <!--tb_telgm_interface_bsc INSERT-->
   <insert id="insertData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto">
     INSERT INTO tb_telgm_interface_bsc (
            IF_ID
          , INST_CD
          , TASK_SE_CD
          , HNDL_ESTBL_SE_CD
          , TELGM_TYPE_CD
          , TELGM_KND_CD
          , DLNG_SE_CD
          , TELGM_NM
          , TELGM_EXPLN
          , STTS_CD
          , CRT_ID
          , UPD_ID
     )
     VALUES (
            #{ifId}
          , #{instCd}
          , #{taskSeCd}
          , #{hndlEstblSeCd}
          , #{telgmTypeCd}
          , #{telgmKndCd}
          , #{dlngSeCd}
          , #{telgmNm}
          , #{telgmExpln}
          , #{sttsCd}
          , #{crtId}
          , #{updId}
     ) 
  </insert>

   <!--tb_telgm_interface_bsc UPDATE-->
   <update id="updateData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto">
     UPDATE tb_telgm_interface_bsc
        SET INST_CD = #{instCd}
          , TASK_SE_CD = #{taskSeCd}
          , HNDL_ESTBL_SE_CD = #{hndlEstblSeCd}
          , TELGM_TYPE_CD = #{telgmTypeCd}
          , TELGM_KND_CD = #{telgmKndCd}
          , DLNG_SE_CD = #{dlngSeCd}
          , TELGM_NM = #{telgmNm}
          , TELGM_EXPLN = #{telgmExpln}
          , STTS_CD = #{sttsCd}
          , UPD_ID = #{updId}
      WHERE IF_ID = #{ifId}
   </update>

   <!--tb_telgm_interface_bsc DELETE-->
   <delete id="deleteData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto">
     DELETE
       FROM tb_telgm_interface_bsc
      WHERE IF_ID = #{ifId}
   </delete>

   <!--tb_telgm_interface_bsc RECORD LOCK SELECT-->
   <select id="getLockData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto" resultType="com.meta.dto.TbTelgmInterfaceBscDto">
      SELECT IF_ID
           , INST_CD
           , TASK_SE_CD
           , HNDL_ESTBL_SE_CD
           , TELGM_TYPE_CD
           , TELGM_KND_CD
           , DLNG_SE_CD
           , TELGM_NM
           , TELGM_EXPLN
           , STTS_CD
       , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
       , CRT_ID
       , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
       , UPD_ID
        FROM tb_telgm_interface_bsc
       WHERE IF_ID = #{ifId}
         FOR UPDATE
  </select>

   <select id="countData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto" resultType="int">
      SELECT COUNT(*)
        FROM tb_telgm_interface_bsc
       WHERE IF_ID = #{ifId}
  </select>

   <!--tb_telgm_interface_bsc SELECT LIST-->
   <select id="getListData" parameterType="com.meta.dto.TbTelgmInterfaceBscDto" resultType="com.meta.dto.TbTelgmInterfaceBscDto">
      SELECT IF_ID
           , INST_CD
           , TASK_SE_CD
           , HNDL_ESTBL_SE_CD
           , TELGM_TYPE_CD
           , TELGM_KND_CD
           , DLNG_SE_CD
           , TELGM_NM
           , TELGM_EXPLN
           , STTS_CD
       , date_format(CRT_DTTM, '%Y-%m-%d %H:%i:%s') AS CRT_DTTM
       , CRT_ID
       , date_format(UPD_DTTM, '%Y-%m-%d %H:%i:%s') AS UPD_DTTM
       , UPD_ID
        FROM tb_telgm_interface_bsc
       WHERE 1=1
       <if test="ifId!= null and ifId!= ''">
         AND IF_ID = #{ifId}
       </if>
       <if test="instCd!= null and instCd!= ''">
         AND INST_CD = #{instCd}
       </if>
       <if test="taskSeCd!= null and taskSeCd!= ''">
         AND TASK_SE_CD = #{taskSeCd}
       </if>
       <if test="hndlEstblSeCd!= null and hndlEstblSeCd!= ''">
         AND HNDL_ESTBL_SE_CD = #{hndlEstblSeCd}
       </if>
       <if test="telgmTypeCd!= null and telgmTypeCd!= ''">
         AND TELGM_TYPE_CD = #{telgmTypeCd}
       </if>
       <if test="telgmKndCd!= null and telgmKndCd!= ''">
         AND TELGM_KND_CD = #{telgmKndCd}
       </if>
       <if test="dlngSeCd!= null and dlngSeCd!= ''">
         AND DLNG_SE_CD = #{dlngSeCd}
       </if>
       <if test="telgmNm!= null and telgmNm!= ''">
         AND TELGM_NM LIKE CONCAT('%',#{telgmNm} , '%')
       </if>
       <if test="telgmExpln!= null and telgmExpln!= ''">
         AND TELGM_EXPLN = #{telgmExpln}
       </if>
       <if test="sttsCd!= null and sttsCd!= ''">
         AND STTS_CD = #{sttsCd}
       </if>
  </select>

</mapper>
